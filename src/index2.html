<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Electron Framework</title>
	<link href="../node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="./assets/css/style.css" />
	<link rel="stylesheet" href="./assets/font-awesome/css/font-awesome.min.css" />


<link href="./assets/css/ezforms/redactor.css" rel="stylesheet">
<link href="./assets/css/ezforms/bootstrap.css" rel="stylesheet">
<link href="./assets/css/ezforms/kv-widgets.css" rel="stylesheet">
<link href="./assets/css/ezforms/select2.css" rel="stylesheet">
<link href="./assets/css/ezforms/select2-addl.css" rel="stylesheet">
<link href="./assets/css/ezforms/select2-krajee.css" rel="stylesheet">
<link href="./assets/css/ezforms/dependent-dropdown.css" rel="stylesheet">
<link href="./assets/css/ezforms/jquery-ui.css" rel="stylesheet">
<link href="./assets/css/ezforms/datepicker.css" rel="stylesheet">
<link href="./assets/css/ezforms/bootstrap-timepicker.css" rel="stylesheet">
<link href="./assets/css/ezforms/jquery.datetimepicker.css" rel="stylesheet">
<link href="./assets/css/ezforms/fileinput.css" rel="stylesheet">
<link href="./assets/css/ezforms/jquery.fileupload.css" rel="stylesheet">
<link href="./assets/css/ezforms/icon.css" rel="stylesheet">
<link href="./assets/css/ezforms/style.css" rel="stylesheet">
<link href="./assets/css/ezforms/jplayer.blue.monday.min.css" rel="stylesheet">
<link href="./assets/css/ezforms/sd.css" rel="stylesheet">
	<!-- JavaScript Core -->
	<script>
		window.$ = window.jQuery = require('./assets/js/jquery/jquery-2.1.4');
	</script>
 
 
<script src="./assets/js/ezforms/redactor.min.js"></script>
<script src="./assets/js/ezforms/th.js"></script>
<script src="./assets/js/ezforms/fontcolor.js"></script>
<script src="./assets/js/ezforms/fontfamily.js"></script>
<script src="./assets/js/ezforms/fontsize.js"></script>
<script src="./assets/js/ezforms/textdirection.js"></script>
<script src="./assets/js/ezforms/textexpander.js"></script>
<script src="./assets/js/ezforms/counter.js"></script>
<script src="./assets/js/ezforms/table.js"></script>
<script src="./assets/js/ezforms/definedlinks.js"></script>
<script src="./assets/js/ezforms/video.js"></script>
<script src="./assets/js/ezforms/imagemanager.js"></script>
<script src="./assets/js/ezforms/filemanager.js"></script>
<script src="./assets/js/ezforms/limiter.js"></script>
<script src="./assets/js/ezforms/fullscreen.js"></script>
<script src="./assets/js/ezforms/yii.js"></script>
<script src="./assets/js/ezforms/select2.full.js"></script>
<script src="./assets/js/ezforms/select2-krajee.js"></script>
<script src="./assets/js/ezforms/dependent-dropdown.js"></script>
<script src="./assets/js/ezforms/depdrop.js"></script>
<script src="./assets/js/ezforms/jquery.inputmask.bundle.js"></script>
<script src="./assets/js/ezforms/jquery-ui.js"></script>
<script src="./assets/js/ezforms/bootstrap-datepicker.js"></script>
<script src="./assets/js/ezforms/bootstrap-datepicker-thai.js"></script>
<script src="./assets/js/ezforms/bootstrap-datepicker.th.js"></script>
<script src="./assets/js/ezforms/inputmask.js"></script>
<script src="./assets/js/ezforms/jquery.inputmask.js"></script>
<script src="./assets/js/ezforms/bootstrap-timepicker.js"></script>
<script src="./assets/js/ezforms/jquery.datetimepicker.full.min.js"></script>
<script src="./assets/js/ezforms/jquery.datetimepicker.full.js"></script>
<script src="./assets/js/ezforms/inputmask.js"></script>
<script src="./assets/js/ezforms/jquery.inputmask.js"></script>
<script src="./assets/js/ezforms/fileinput.js"></script>
<script src="./assets/js/ezforms/jquery.ui.widget.js"></script>
<script src="./assets/js/ezforms/jquery.iframe-transport.js"></script>
<script src="./assets/js/ezforms/jquery.fileupload.js"></script>
<script src="./assets/js/ezforms/load-image.min.js"></script>
<script src="./assets/js/ezforms/canvas-to-blob.min.js"></script>
<script src="./assets/js/ezforms/jquery.fileupload-process.js"></script>
<script src="./assets/js/ezforms/jquery.fileupload-image.js"></script>
<script src="./assets/js/ezforms/jquery.fileupload-audio.js"></script>
<script src="./assets/js/ezforms/jquery.fileupload-video.js"></script>
<script src="./assets/js/ezforms/jquery.fileupload-validate.js"></script>
<script src="./assets/js/ezforms/bootstrap.js"></script>
<script src="./assets/js/ezforms/text.js"></script>
<script src="./assets/js/ezforms/drawingLive.js"></script>
<script src="./assets/js/ezforms/excanvas.min.js"></script>
<script src="./assets/js/ezforms/jquery.event.drag-2.2.js"></script>
<script src="./assets/js/ezforms/jquery.fullscreen.min.js"></script>
<script src="./assets/js/ezforms/MediaStreamRecorder.js"></script>
<script src="./assets/js/ezforms/gumadapter.js"></script>
<script src="./assets/js/ezforms/app.js"></script>
<script src="./assets/js/ezforms/jquery.jplayer.min.js"></script>
<script src="./assets/js/ezforms/js-gen-condition.js"></script>
<script src="./assets/js/ezforms/yii.activeForm.js"></script>

<!-- <link href="./assets/js/select2/select2.min.css" rel="stylesheet" />

<script src="./assets/js/select2/select2.full.js"></script> -->
</head>

<body>
	<div class="container-fluid">
		<div id="show-ezform"></div>
	</div>
	

	<div id="Index2registerScript"></div>
	<script>
		let knexRemote02 = require('./assets/js/sql/knex-sqlite3.js');
		let ezf_id = getQueryStringValue("ezf_id"); 
		getEzformName(ezf_id);
		
		function getQueryStringValue (key) {  
			return decodeURIComponent(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + encodeURIComponent(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
		}
		function getEzformName(ezf_id){
			knexRemote02.knexfindById("ezform_search",{ezf_id:ezf_id}).subscribe(
				(res)=>{
					$("#panelTitle").html(res.ezf_name);
				},
				(err)=>console.log(err)
				);
		}
		
		
		index2LoadScript(ezf_id);
		showEzform();
		
		Index2LoadControlBtn(ezf_id);
		function showEzform(){
			$.ajax({
				url:'./views/ezform/showForm.html',
				success:function(data){
					$("#show-ezform").html(data);
				}
			})
		} 
		function Index2LoadControlBtn(ezf_id){
			//alert(ezf_id);
			$("#Index2registerScript").html("");
			let url = getUserDoc() + "/ezforms/tbdata_"+ezf_id+"ControlBtn.html";
			$.ajax({
				url: url,
				success: function (data) {
					//console.log(data);
					$("#Index2Ezbutton").html(data);
				},
				error: function (err) {
					$("#Index2Ezbutton").html(err);
				}
			});
		}
		function index2LoadScript(ezf_id="") {
			//alert(ezf_id);
			$("#Index2registerScript").html("");
			let url = getUserDoc() + "/ezforms/tbdata_"+ezf_id+"JS.html";
			$.ajax({
				url: url,
				success: function (data) {
					$("#Index2registerScript").html(data);
				},
				error: function (err) {
					$("#Index2registerScript").html(err);
				}
			});
		}
		function Index2LoadTemplateEzform(ezf_id=""){
			let url = getUserDoc() + "/ezforms/tbdata_"+ezf_id+".html";
			$.ajax({
				url: url,
				success: function (data) {
					$("#Index2Ezform").html(data);
				},
				error: function (err) {
					$("#Index2Ezform").html(err);
				}
			});
		}
		function getUserDoc() {
			return process.env.USERPROFILE + '\\Documents';
		}
		
	</script>

</body>

</html>